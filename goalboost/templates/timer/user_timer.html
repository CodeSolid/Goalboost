{% extends "layout/default.html" %}
{% set active_page = "index" %}
{% block title %}Goalboost Time and Billing{% endblock %}
{% block header %}
<script src="/static/js/timer/timer.js" data-userId="{{userId}}" data-userEmail="{{userEmail}}"
        data-authToken="{{authToken}}">

</script>
{% endblock  %}
{% block content %}
{% raw %}

<!-- Todo move to global stylesheet -->
<style type="text/css">

    input[type="text"]:disabled {
        background: #fff;
        border: 0px solid #fff;
    }

    .save-icon {
        font-size: 1.5em;
    }

    a.save-icon {
        color: #4cae4c;
    }

    .cancel-icon {
        font-size: 1.5em;
    }

    a.cancel-icon {
        color: #bc271c;
    }

    .info-icon {
        font-size: 1.5em;
    }

    a.info-icon {
        color: #008CBA;
    }

    .top-offset-label {
        padding-top:.5em;
    }

    .no-left-padding {
        padding-left:0;px;
    }

</style>
<div ng-app="timerApp" ng-controller="TimerController" ng-cloak>


    <section ng-if="timerListModel.timers.length > 0">
        <div class="row" data-equalizer>
            <div class="large-12 columns"><h1>What Are You Working On?</h1></div>
        </div>
        <div class="row" data-equalizer>
            <div class="large-2 columns ">
                <input fi-pencil date-picker ng-model="timerListModel.timers[0].dateEntered"/>
            </div>

            <span time-entry ng-model="timerListModel.timers[0].seconds"></span>

            <script type="text/ng-template" id="time-entry-display.html">
                <section>
                    <section id="timer-displaying" >
                        <div class="large-8 columns">&nbsp;</div>
                        <div class="large-2 columns no-right-padding ">
                                                    <span class="right">
                                    <a href="#" class="fi-pencil"
                                       onclick='$("#timer-displaying").hide();$("#timer-editing").show();'>&nbsp;
                                        <span style="color:black;font-size:2em;">{{timerListModel.timers[0].seconds | formatTime}}</span>

                                    </a>
                                    </span>
                        </div>
                    </section>
                    <section id="timer-editing" hidden>
                        <div class="large-8 columns">&nbsp;</div>
                        <div class="large-2 columns no-right-padding " >
                                        <input style="color:black;font-size:2em;" onblur='$("#timer-displaying").show();$("#timer-editing").hide();' value="{{timerListModel.timers[0].seconds | formatTime}}">



                        </div>
<!--                        <div class="large-3 columns">&nbsp;</div>
                        <div class="large-7 columns no-right-padding right">

                            <div class="row">
                                <div class="large-6  columns">&nbsp;</div>
                                <div class="large-2 columns no-right-padding top-offset-label " >Time spent:</div>
                                <div class="large-2 columns no-right-padding"><input type="text" value="11 hrs"
                                                                     maxlength="40" onblur='$("#timer-displaying").show();$("#timer-editing").hide();'/></div>
                                <div class="large-2 columns no-left-padding no-right-padding top-offset-label">&nbsp;
                                    <a class="fi-check save-icon" href="#" onclick='console.log("saving...");$("#timer-displaying").show();$("#timer-editing").hide();'></a></i>&nbsp;
                                    <a class="fi-x cancel-icon" href="#" onclick='$("#timer-displaying").show();$("#timer-editing").hide();'></a></i>
                                </div>
                            </div>
                        </div>
-->
                    </section>


                </section>
            </script>
        </div>
        <div class="row">
            <div class="left-align large-12 medium-12 small-12 columns no-right-padding">
                <textarea rows=2 placeholder="Task description..." style="font-size:1.0em;"
                          ng-model="timerListModel.timers[0].notes"></textarea>
            </div>
        </div>
        <div class="row">
            <div class="large-9 medium-10 small-12 columns left-align">
                <button class="button tiny fi-plus" ng-click="$parent.createNewTimer()">&nbsp;New Task</button>
                <button class="button tiny fi-save" ng-click="$parent.timerListModel.saveTimerToServer(0)">&nbsp;Save
                </button>
                <button class="button tiny fi-trash" ng-click="$parent.deleteTimer(0)">&nbsp;Delete</button>
                </ul>
            </div>
            <div class="large-3 medium-2 small-12 columns">
                <div class="row right-align">
                    <a href="#" ng-click="$parent.toggleTimer()" class="button " ng-class="$parent.startButtonClass">
                        &nbsp;{{$parent.startButtonText}}</a>
                </div>
            </div>
        </div>
    </section>

    <section ng-if="timerListModel.timers.length > 1">
        <div class="row">
            <div class="small-12 columns ">
                <h3>Recent Tasks</h3>
            </div>
        </div>
        <div class="row">
            <div class="medium-1 small-6 columns "><strong>Date</strong></div>
            <div class="medium-1 small-6 columns " style="text-align:right;padding-right:1em;"><strong>
                &nbsp;h:mm:ss</strong></div>
            <div class="fullwidth medium-10 small-12 columns"><strong>Description</strong></div>
        </div>
    </section>
    <div class="row" ng-repeat="t in timerListModel.timers" ng-if="$index > 0">
        <div class="medium-1 small-6 columns ">{{ t.dateEntered }}</div>
        <div class="medium-1 small-5 columns " style="text-align:right;padding-right:0;">{{t.seconds | formatTime}}
        </div>
        <div class="fullwidth medium-10 small-12 columns">
            <a class="fi-pencil" href="#" ng-click="activateTimer($index)">&nbsp;</a>{{t.notes}}&nbsp;
        </div>

    </div>


    <section ng-if="timerListModel.timers.length == 0">
        <div class="row">
            <div class="large-12 columns">
                <p class="lead">
                    You have no timers. Start by <a href="#" ng-click="$parent.createNewTimer()">creating a timer</a>.
                </p>
                </p>
            </div>
        </div>
    </section>

    <div id="editModal" class="reveal-modal tiny" data-reveal aria-labelledby="modalTitle" aria-hidden="true"
         role="dialog">
        <div class="row">
            <div class="large-12 columns"><h3 id="modalTitle">Enter time:</h3></div>
        </div>
        <div class="row">
            <div class="large-2 columns end">Hours</div>
            <div class="large-2 columns end">Minutes</div>
            <div class="large-2 columns end">Seconds</div>
        </div>
        <div class="row">
            <div class="large-2 columns end"><input type="text" value="11" maxlength="2"/></div>
            <div class="large-2 columns end"><input type="text" value="22" maxlength="2"/></div>
            <div class="large-2 columns end"><input type="text" value="11" maxlength="2"/></div>
        </div>
        <div class="row">
            <div class="large-12 columns centered ">
                <button class="small button">OK</button>
                &nbsp;&nbsp;
                <button class="small button">Cancel</button>
            </div>
        </div>
        <a class="close-reveal-modal" aria-label="Close">&#215;</a>
    </div>

</div>
</div>

{% endraw %}
{% endblock %}

{% block js_init %}
{% endblock %}

